<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <title>My To-Dos</title>
    <style>
        .modal-header, h4, .close {
          background-color: #2D53FE;
          color:white !important;
          text-align: center;
          font-size: 30px;
        }
        .modal-footer {
          background-color: #f9f9f9;
        }
        #head{
            float: left;
        }
    
        </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-default bg-dark text-white">
            <div><h1>My TO-Dos!</h1></div>
            <div>tipo</div><!--fazer lógica para mostrar se é usuário ou adm-->
            <div>usuario<a>logout</a></div>
        </nav>
        
    </header>
    
    <script type="text/javascript">
        var form
        
        function CadastrarAfazer(){
            form = document.getElementById("formAfazer");
            dadosForm = new FormData(form)
            var titulo = dadosForm.get("titulo")
            var descricao = dadosForm.get("descricao")
            var data = dadosForm.get("data")
            console.log("Titulo: " + titulo);
            console.log("Descrição: " + descricao);
            console.log("Data: " + data);
            var arrayFormData = {};
            dadosForm.forEach((valor, nome) => arrayFormData[nome] = valor);
            var json = JSON.stringify(arrayFormData);
            console.log(json)
            request= new XMLHttpRequest()
            request.open("POST", "../back-end/api/controller/create.php", true)
            request.setRequestHeader("Content-type", "application/json")
            request.send(json)
        }
 
    </script>
    <div class="container">
        <h2>Meus Afazeres</h2>
        <button type="button" class="btn bg-primary btn-lg glyphicon glyphicon-plus" id="newtask">Novo</button>
        <div class="modal fade" id="modaltask" role="dialog">
          <div class="modal-dialog">
            
            <div class="modal-content">
              <div class="modal-header" style="padding:10px 50px;">
                <h4><span class="glyphicon glyphicon-plus"></span> Nova Tarefa</h4>
              </div>
              <div class="modal-body" style="padding:40px 50px;">
                <form id="formAfazer" role="form">
                    <div class="form-group">
                        <label for="titulo">Titulo</label>
                        <input type="text" class="form-control" name="titulo" placeholder="" autocomplete="on" required><br>
                    </div>
                    <div class="form-group">
                        <label for="descricao">Descrição</label>
                        <input type="text" class="form-control" name="descricao" placeholder="" autocomplete="on" required><br>
                    </div>
                  <div class="form-group">
                    <label for="data">Data</label>
                    <input type="date" class="form-control" name="data" placeholder="" autocomplete="on" required><br>
                  </div>
                  
                    <button type="button" value="Cadastrar afazer" onclick="CadastrarAfazer();" class="btn btn-primary btn-block"><span class="glyphicon glyphicon-off"></span> Confirmar</button>
                </form>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancelar</button>
              </div>
            </div>
            
          </div>
        </div> 
      </div>
    
    <script>  
        $(document).ready(function(){
          $("#newtask").click(function(){
            $("#modaltask").modal();
          });
          });
    </script>
    
</body>
</html>